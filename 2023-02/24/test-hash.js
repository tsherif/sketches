const words = [
    "Development",
    "on",
    "Windows",
    "and",
    "Linux",
    "is",
    "to",
    "a",
    "great",
    "extent",
    "similar",
    "On",
    "Windows",
    "I",
    "use",
    "cl",
    "to",
    "compile",
    "Visual",
    "Studio",
    "2019",
    "to",
    "debug",
    "and",
    "simple",
    "batch",
    "files",
    "as",
    "the",
    "build",
    "system",
    "On",
    "Linux",
    "I",
    "use",
    "gcc",
    "to",
    "compile",
    "gdb",
    "to",
    "debug",
    "make",
    "to",
    "build",
    "The",
    "development",
    "experience",
    "on",
    "Windows",
    "is",
    "generally",
    "smoother",
    "due",
    "to",
    "the",
    "thorough",
    "API",
    "documentation",
    "on",
    "MSDN",
    "and",
    "a",
    "more",
    "pleasant",
    "debugging",
    "experience",
    "with",
    "Visual",
    "Studio",
    "but",
    "Ive",
    "never",
    "had",
    "to",
    "change",
    "any",
    "parts",
    "of",
    "the",
    "design",
    "of",
    "spaceshooterc",
    "to",
    "fit",
    "constraints",
    "on",
    "one",
    "platform",
    "or",
    "the",
    "other",
    "The",
    "Web",
    "on",
    "the",
    "other",
    "hand",
    "brings",
    "with",
    "it",
    "some",
    "challenges",
    "that",
    "werent",
    "present",
    "on",
    "the",
    "native",
    "platforms",
    "I",
    "use",
    "emcc",
    "to",
    "compile",
    "and",
    "make",
    "again",
    "to",
    "build",
    "I",
    "debug",
    "using",
    "Chrome",
    "DevTools",
    "as",
    "described",
    "in",
    "this",
    "blog",
    "post",
    "which",
    "takes",
    "a",
    "few",
    "steps",
    "to",
    "set",
    "up",
    "The",
    "first",
    "is",
    "to",
    "install",
    "the",
    "CC",
    "DevTools",
    "Support",
    "Extension",
    "and",
    "to",
    "enable",
    "WebAssembly",
    "Debugging",
    "Enable",
    "DWARF",
    "support",
    "in",
    "the",
    "DevTools",
    "settings",
    "Additionally",
    "to",
    "ensure",
    "the",
    "extension",
    "could",
    "find",
    "the",
    "files",
    "on",
    "my",
    "system",
    "I",
    "had",
    "to",
    "set",
    "the",
    "compilation",
    "flag",
    "fdebugcompilationdir",
    "ie",
    "the",
    "root",
    "of",
    "the",
    "repository",
    "relative",
    "to",
    "the",
    "build",
    "directory",
    "and",
    "remap",
    "the",
    "file",
    "paths",
    "as",
    "decribed",
    "in",
    "this",
    "bug",
    "report",
    "In",
    "addition",
    "to",
    "the",
    "debugging",
    "challenges",
    "the",
    "Web",
    "involves",
    "constraints",
    "that",
    "required",
    "changes",
    "to",
    "the",
    "control",
    "flow",
    "of",
    "spaceshooterc",
    "the",
    "most",
    "prominent",
    "of",
    "these",
    "being",
    "the",
    "requirement",
    "that",
    "certain",
    "operations",
    "only",
    "be",
    "performed",
    "in",
    "user",
    "input",
    "callbacks",
    "namely",
    "playing",
    "audio",
    "and",
    "entering",
    "fullscreen",
    "mode",
    "This",
    "challenge",
    "is",
    "further",
    "compounded",
    "by",
    "the",
    "fact",
    "that",
    "the",
    "Web",
    "Gamepad",
    "API",
    "uses",
    "a",
    "polling",
    "system",
    "rather",
    "than",
    "events",
    "and",
    "callbacks",
    "meaning",
    "Gamepad",
    "input",
    "as",
    "specced",
    "isnt",
    "considered",
    "user",
    "input",
    "for",
    "the",
    "purpose",
    "of",
    "enabling",
    "the",
    "abovementioned",
    "operations",
    "Chrome",
    "implements",
    "its",
    "own",
    "workaround",
    "for",
    "this",
    "problem",
    "but",
    "since",
    "its",
    "nonstandard",
    "and",
    "not",
    "supported",
    "in",
    "Firefox",
    "I",
    "only",
    "support",
    "toggling",
    "fullscreen",
    "via",
    "the",
    "keyboard",
    "even",
    "if",
    "a",
    "gamepad",
    "is",
    "connected",
    "Furthermore",
    "I",
    "implement",
    "the",
    "logic",
    "to",
    "toggle",
    "fullscreen",
    "directly",
    "in",
    "the",
    "keyboard",
    "input",
    "handler",
    "rather",
    "than",
    "in",
    "the",
    "game",
    "loop",
    "as",
    "is",
    "done",
    "on",
    "the",
    "other",
    "platforms",
    "Finally",
    "to",
    "ensure",
    "audio",
    "is",
    "initialized",
    "correctly",
    "I",
    "implement",
    "a",
    "start",
    "screen",
    "that",
    "only",
    "appears",
    "on",
    "the",
    "Web",
    "and",
    "asks",
    "the",
    "user",
    "for",
    "keyboard",
    "input",
    "to",
    "start",
    "the",
    "game",
    "so",
    "that",
    "it",
    "can",
    "do",
    "so",
    "within",
    "a",
    "keyboard",
    "input",
    "callback"
];

const ref = words.reduce((acc, w) => {
    acc[w] = acc[w] || 0;
    ++acc[w];
    return acc;
}, {});

const hash = require("./hash-out.json");


const refKeys = Object.keys(ref);
const hashKeys = Object.keys(hash);

if (refKeys.length === hashKeys.length) {
    console.log("Lengths match!")
} else {
    console.error("Length mismatch!");
}

const mismatchedRef = refKeys.filter(k => !Number.isFinite(hash[k]))
const mismatchedHash = hashKeys.filter(k => !Number.isFinite(ref[k]))

if (mismatchedRef.length === 0 && mismatchedHash.length === 0) {
    console.log("All keys match!")
} else {
    console.error("Key mismatches!", mismatchedRef.concat(mismatchedHash).join(", "));
}

let mismatches = 0;
hashKeys.forEach(k => {
    if (ref[k] !== hash[k]) {
        console.log(`Mismatch on ${k}`);
        ++mismatches;
    }
});

if (mismatches === 0) {
    console.log("TOTAL MATCH!");
}